const { PrismaClient } = require('@prisma/client'); const prisma = new PrismaClient(); async function main() { console.log('Seeding verification pricing...'); const entries = [{ category: 'verification', subservice: 'nin', variant: 'Standard', basePrice: 150, userPrice: 500, marketerPrice: 400 }, { category: 'verification', subservice: 'nin', variant: 'Premium', basePrice: 200, userPrice: 800, marketerPrice: 600 }, { category: 'verification', subservice: 'nin', variant: 'Regular', basePrice: 100, userPrice: 400, marketerPrice: 300 }]; for (const entry of entries) { const desc = entry.category.toUpperCase() + ' ' + entry.subservice.toUpperCase() + ' - ' + entry.variant; let catalog = await prisma.serviceCatalog.findFirst({ where: { category: { equals: entry.category, mode: 'insensitive' }, subservice: { equals: entry.subservice, mode: 'insensitive' }, variant: { equals: entry.variant, mode: 'insensitive' }, } }); if (!catalog) { catalog = await prisma.serviceCatalog.create({ data: { category: entry.category, subservice: entry.subservice, variant: entry.variant, description: desc } }); console.log('Created catalog: ' + desc); } const pricing = await prisma.catalogPricing.findFirst({ where: { category: { equals: entry.category, mode: 'insensitive' }, subservice: { equals: entry.subservice, mode: 'insensitive' }, variant: { equals: entry.variant, mode: 'insensitive' }, } }); if (pricing) { await prisma.catalogPricing.update({ where: { id: pricing.id }, data: { basePrice: entry.basePrice, userPrice: entry.userPrice, marketerPrice: entry.marketerPrice, } }); console.log('Updated pricing for ' + entry.variant); } else { await prisma.catalogPricing.create({ data: { category: entry.category, subservice: entry.subservice, variant: entry.variant, basePrice: entry.basePrice, userPrice: entry.userPrice, marketerPrice: entry.marketerPrice, parameters: {} } }); console.log('Created pricing for ' + entry.variant); } } } main().catch((e) => { console.error(e); process.exit(1); }).finally(async () => { await prisma.$disconnect(); });
